<% action_url = ( source == :session ) ? session_url : users_url %>
<% message = ( source == :session) ? 'Sign in' : 'Register' %>

<form action="<%= action_url %>" method="post" >
  <input
    type="hidden"
    name="authenticity_token"
    value="form_authenticity_token">

  <% if :action == :edit %>
    <input type="hidden" name="_method" value="patch">
  <% end %>

  <label for="email">Email</label>
  <input type="text" name="user[email]" id="email">

  <label for="password">Password</label>
  <input type="password" name="user[password]" id="password">

  <input type="submit" value="<%= message %>">
</form>
